<?php namespace User\Model;use Zend\Db\TableGateway\TableGateway;class UserTable{	protected $username;	protected $password;	protected $name;	protected $email;	protected $profileimg;		protected $tableGateway;		public function __construct(TableGateway $tableGateway)	{		$this->tableGateway = $tableGateway;	}		public function getAllUser()	{		$resultset = $this->tableGateway->select();		return $resultset;	}		public function getUser($id)	{		$id = (int)$id;		$rowset = $this->tableGateway->select(array('id' => $id));		$row = $rowset->current();		if(!$row)			throw new \Exception("Could not found row $id");					return $row;	}		public function getUserByUsername($username)	{		$rowset = $this->tableGateway->select(array('username' => $username));		$row = $rowset->current();		if(!$row)			throw new \Exception("Could not found row $username");					return $row;	}		public function saveUser($userData)	{		$data = array('username' => $userData['username'], 					  'password' => md5($userData['password']), 					  'name' => $userData['name'], 					  'email' => $userData['email']					  );		$id = (int)$userData['id'];		if($id == 0)			$this->tableGateway->insert($data);		else		{			if($this->getUser($id))				$this->tableGateway->update($data, array('id' => $id));			else				throw new \Exception("Could not found row $id");		}	}		public function updateImgUser($id, $imgpath)	{		$id = (int)$id;		$data = array('profileimg' => $imgpath);		$this->tableGateway->update($data, array('id' => $id));	}		public function deleteUser($id)	{		$id = (int) $id;		$this->tableGateway->delete(array('id' => $id));	}}